{
  "task_description": "Create a Linux desktop application that provides a GUI frontend for ClamAV antivirus CLI tool using PyGObject with GTK4 and Adwaita styling. Basic UI and initial setup only.",
  "scoped_services": ["clamui"],
  "files_to_create": [
    "src/__init__.py",
    "src/main.py",
    "src/app.py",
    "src/ui/__init__.py",
    "src/ui/window.py",
    "src/ui/scan_view.py",
    "src/core/__init__.py",
    "src/core/scanner.py",
    "src/core/utils.py",
    "requirements.txt",
    "README.md"
  ],
  "files_to_modify": [],
  "files_to_reference": [],
  "patterns": {
    "gtk4_imports": "import gi; gi.require_version('Gtk', '4.0'); gi.require_version('Adw', '1'); from gi.repository import Gtk, Adw, GLib, Gio",
    "application_class": "class ClamUIApp(Adw.Application): application_id='com.github.clamui'",
    "thread_safe_ui": "Use GLib.idle_add(callback, result) for UI updates from background threads",
    "async_subprocess": "Run ClamAV in background thread with daemon=True, use subprocess.run()",
    "clamav_exit_codes": "0=clean, 1=virus found (not error), 2=actual error"
  },
  "existing_implementations": {
    "description": "Greenfield project - no existing implementations",
    "relevant_files": []
  },
  "gotchas": [
    "gi.require_version() MUST be called BEFORE importing from gi.repository",
    "Never block GTK main thread with subprocess calls",
    "Exit code 1 from clamscan means virus found, NOT an error",
    "Application ID must use reverse-DNS format"
  ],
  "created_at": "2025-12-29T12:28:59.275457"
}
